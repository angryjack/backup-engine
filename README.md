# backup-engine
Система для создания автоматических бекапов файлов с дальнейшей выгрузкой их на Яндекс Диск

## Установка

Скачать репозиторий и распаковать в нужную директорию, либо
через git
``` bash
$ git clone https://github.com/angryjack/backup-engine.git 
```

Создаем конфиг
``` bash
$ cp config-example.php config.php
```

Настраиваем конфиг
``` php
// токен яндекс диска
define("OAUTH", "");

// рабочая дирректория с сайтами
define("WORK_PATH", __DIR__ . "../");

// папка бекапов на яндекс диске
define("BACKUP_PATH", "/backups/");
```

## Использование
Запустить **index.php** 

## Рекомендации по использованию
Использовать последнюю версию php. 
Замеры показали что создание архивов используя php7.2 выполняется **~6 раз быстрее** по сравнению с php5.6 

## Инструкция по созданию токена OAUTH
1. Создать новое приложение:
```
https://oauth.yandex.ru/client/new
```
2. При регистрации или редактировании приложения, нажмите ссылку Подставить URL для разработки в поле **Платформы → Веб-сервисы → Callback URI.**
3. Перейдите по ссылке следующего вида:
```
https://oauth.yandex.ru/authorize?response_type=token&client_id=<идентификатор приложения>
```
4. На открывшейся странице нажмите кнопку Подтвердить, чтобы разрешить доступ к аккаунту. Разрешать доступ не потребуется, если для данного приложения уже был выдан токен, и срок его жизни еще не истек.

Подробная инструкция по созданию токена доступка по ссылке: 
```
https://tech.yandex.ru/oauth/doc/dg/concepts/about-docpage/
```